/*
 Highcharts JS v11.0.0 (2023-04-26)

 (c) 2009-2021 Torstein Honsi

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/series-label",["highcharts"],function(w){a(w);a.Highcharts=w;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function w(a,m,B,f){a.hasOwnProperty(m)||(a[m]=f.apply(null,B),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:m,module:a[m]}})))}a=a?
a._modules:{};w(a,"Extensions/SeriesLabel/SeriesLabelDefaults.js",[],function(){return{enabled:!0,connectorAllowed:!1,connectorNeighbourDistance:24,format:void 0,formatter:void 0,minFontSize:null,maxFontSize:null,onArea:null,style:{fontSize:"0.8em",fontWeight:"bold"},useHTML:!1,boxesToAvoid:[]}});w(a,"Extensions/SeriesLabel/SeriesLabelUtilities.js",[],function(){function a(a,f,m,y,t,q){a=(q-f)*(m-a)-(y-f)*(t-a);return 0<a?!0:!(0>a)}function m(B,f,m,y,t,q,z,A){return a(B,f,t,q,z,A)!==a(m,y,t,q,z,A)&&
a(B,f,m,y,t,q)!==a(B,f,m,y,z,A)}return{boxIntersectLine:function(a,f,w,y,t,q,z,A){return m(a,f,a+w,f,t,q,z,A)||m(a+w,f,a+w,f+y,t,q,z,A)||m(a,f+y,a+w,f+y,t,q,z,A)||m(a,f,a,f+y,t,q,z,A)},intersectRect:function(a,f){return!(f.left>a.right||f.right<a.left||f.top>a.bottom||f.bottom<a.top)}}});w(a,"Extensions/SeriesLabel/SeriesLabel.js",[a["Core/Animation/AnimationUtilities.js"],a["Core/Chart/Chart.js"],a["Core/FormatUtilities.js"],a["Core/Defaults.js"],a["Extensions/SeriesLabel/SeriesLabelDefaults.js"],
a["Extensions/SeriesLabel/SeriesLabelUtilities.js"],a["Core/Utilities.js"]],function(a,m,w,f,O,y,t){function q(u,a,r,b,k){const d=u.chart,h=u.options.label||{},e=D(h.onArea,!!u.area),g=e||h.connectorAllowed;var c=d.boxesToAvoid;let F=Number.MAX_VALUE,f=Number.MAX_VALUE;var n;let m;var C;let v,q;for(q=0;c&&q<c.length;q+=1)if(P(c[q],{left:a,right:a+b.width,top:r,bottom:r+b.height}))return!1;for(q=0;q<d.series.length;q+=1){const E=d.series[q];c=E.interpolatedPoints&&[...E.interpolatedPoints];if(E.visible&&
c){var l=d.plotHeight/10;for(C=d.plotTop;C<=d.plotTop+d.plotHeight;C+=l)c.unshift({chartX:d.plotLeft,chartY:C}),c.push({chartX:d.plotLeft+d.plotWidth,chartY:C});for(l=1;l<c.length;l+=1){if(c[l].chartX>=a-16&&c[l-1].chartX<=a+b.width+16){if(J(a,r,b.width,b.height,c[l-1].chartX,c[l-1].chartY,c[l].chartX,c[l].chartY))return!1;u===E&&!n&&k&&(n=J(a-16,r-16,b.width+32,b.height+32,c[l-1].chartX,c[l-1].chartY,c[l].chartX,c[l].chartY))}!g&&!n||u===E&&!e||(C=a+b.width/2-c[l].chartX,v=r+b.height/2-c[l].chartY,
F=Math.min(F,C*C+v*v))}if(!e&&g&&u===E&&(k&&!n||F<Math.pow(h.connectorNeighbourDistance||1,2))){for(l=1;l<c.length;l+=1)n=Math.min(Math.pow(a+b.width/2-c[l].chartX,2)+Math.pow(r+b.height/2-c[l].chartY,2),Math.pow(a-c[l].chartX,2)+Math.pow(r-c[l].chartY,2),Math.pow(a+b.width-c[l].chartX,2)+Math.pow(r-c[l].chartY,2),Math.pow(a+b.width-c[l].chartX,2)+Math.pow(r+b.height-c[l].chartY,2),Math.pow(a-c[l].chartX,2)+Math.pow(r+b.height-c[l].chartY,2)),n<f&&(f=n,m=c[l]);n=!0}}}return!k||n?{x:a,y:r,weight:F-
(m?f:0),connectorPoint:m}:!1}function z(a){a.boxesToAvoid=[];const u=a.labelSeries||[],r=a.boxesToAvoid;a.series.forEach(b=>(b.points||[]).forEach(a=>(a.dataLabels||[]).forEach(a=>{const {width:d,height:k}=a.getBBox(),g=a.translateX+(b.xAxis?b.xAxis.pos:b.chart.plotLeft);a=a.translateY+(b.yAxis?b.yAxis.pos:b.chart.plotTop);r.push({left:g,top:a,right:g+d,bottom:a+k})})));u.forEach(function(b){const a=b.options.label||{};b.interpolatedPoints=A(b);r.push(...a.boxesToAvoid||[])});a.series.forEach(function(b){function k(b,
a,d){const c=Math.max(r,D(y,-Infinity)),e=Math.min(r+f,D(z,Infinity));return b>c&&b<=e-d.width&&a>=n&&a<=n+m-d.height}var d=b.options.label;if(d&&(b.xAxis||b.yAxis)){var h="highcharts-color-"+D(b.colorIndex,"none"),u=!b.labelBySeries,g=d.minFontSize,c=d.maxFontSize,e=a.inverted,r=e?b.yAxis.pos:b.xAxis.pos,n=e?b.xAxis.pos:b.yAxis.pos,f=a.inverted?b.yAxis.len:b.xAxis.len,m=a.inverted?b.xAxis.len:b.yAxis.len,v=b.interpolatedPoints,t=D(d.onArea,!!b.area),l=[],w=b.xData||[],p,x=b.labelBySeries;if(t&&!e){e=
[b.xAxis.toPixels(w[0]),b.xAxis.toPixels(w[w.length-1])];var y=Math.min.apply(Math,e);var z=Math.max.apply(Math,e)}if(b.visible&&!b.boosted&&v){x||(x=b.name,"string"===typeof d.format?x=Q(d.format,b,a):d.formatter&&(x=d.formatter.call(b)),b.labelBySeries=x=a.renderer.label(x,0,0,"connector",0,0,d.useHTML).addClass("highcharts-series-label highcharts-series-label-"+b.index+" "+(b.options.className||"")+" "+h),a.renderer.styledMode||(h="string"===typeof b.color?b.color:"#666666",x.css(K({color:t?a.renderer.getContrast(h):
h},d.style||{})),x.attr({opacity:a.renderer.forExport?1:0,stroke:b.color,"stroke-width":1})),g&&c&&x.css({fontSize:g+(b.sum||0)/(b.chart.labelSeriesMaxSum||0)*(c-g)+"px"}),x.attr({padding:0,zIndex:3}).add());g=x.getBBox();g.width=Math.round(g.width);for(e=v.length-1;0<e;--e)t?(c=v[e].chartX-g.width/2,h=(v[e].chartCenterY||0)-g.height/2,k(c,h,g)&&(p=q(b,c,h,g))):(c=v[e].chartX+3,h=v[e].chartY-g.height-3,k(c,h,g)&&(p=q(b,c,h,g,!0)),p&&l.push(p),c=v[e].chartX+3,h=v[e].chartY+3,k(c,h,g)&&(p=q(b,c,h,g,
!0)),p&&l.push(p),c=v[e].chartX-g.width-3,h=v[e].chartY+3,k(c,h,g)&&(p=q(b,c,h,g,!0)),p&&l.push(p),c=v[e].chartX-g.width-3,h=v[e].chartY-g.height-3,k(c,h,g)&&(p=q(b,c,h,g,!0))),p&&l.push(p);if(d.connectorAllowed&&!l.length&&!t)for(c=r+f-g.width;c>=r;c-=16)for(h=n;h<n+m-g.height;h+=16)(p=q(b,c,h,g,!0))&&l.push(p);if(l.length){if(l.sort((b,a)=>a.weight-b.weight),p=l[0],(a.boxesToAvoid||[]).push({left:p.x,right:p.x+g.width,top:p.y,bottom:p.y+g.height}),(l=Math.sqrt(Math.pow(Math.abs(p.x-(x.x||0)),2)+
Math.pow(Math.abs(p.y-(x.y||0)),2)))&&b.labelBySeries){d={opacity:a.renderer.forExport?1:0,x:p.x,y:p.y};v={opacity:1};10>=l&&(v={x:d.x,y:d.y},d={});let c;u&&(c=H(b.options.animation),c.duration*=.2);b.labelBySeries.attr(K(d,{anchorX:p.connectorPoint&&(p.connectorPoint.plotX||0)+r,anchorY:p.connectorPoint&&(p.connectorPoint.plotY||0)+n})).animate(v,c);b.options.kdNow=!0;b.buildKDTree();if(b=b.searchPoint({chartX:p.x,chartY:p.y},!0))x.closest=[b,p.x-(b.plotX||0),p.y-(b.plotY||0)]}}else x&&(b.labelBySeries=
x.destroy())}else x&&(b.labelBySeries=x.destroy())}});R(a,"afterDrawSeriesLabels")}function A(a){function e(a){const c=Math.round((a.plotX||0)/8)+","+Math.round((a.plotY||0)/8);q[c]||(q[c]=1,b.push(a))}if(a.xAxis||a.yAxis){var r=a.points,b=[],k=a.graph||a.area,d=k&&k.element,h=a.chart.inverted,f=a.xAxis,g=a.yAxis,c=h?g.pos:f.pos;h=h?f.pos:g.pos;f=D((a.options.label||{}).onArea,!!a.area);var m=g.getThreshold(a.options.threshold),q={};if(a.getPointSpline&&d&&d.getPointAtLength&&!f&&r.length<(a.chart.plotSizeX||
0)/16){var n=k.toD&&k.attr("d");k.toD&&k.attr({d:k.toD});g=d.getTotalLength();for(a=0;a<g;a+=16)f=d.getPointAtLength(a),e({chartX:c+f.x,chartY:h+f.y,plotX:f.x,plotY:f.y});n&&k.attr({d:n});r=r[r.length-1];e({chartX:c+(r.plotX||0),chartY:h+(r.plotY||0)})}else for(g=r.length,a=0;a<g;a+=1){d=r[a];const {plotX:b,plotY:g}=d;if(G(b)&&G(g)){k={plotX:b,plotY:g,chartX:c+b,chartY:h+g};f&&(k.chartCenterY=h+(g+D(d.yBottom,m))/2);if(n){d=Math.abs(k.chartX-n.chartX);var u=Math.abs(k.chartY-n.chartY);d=Math.max(d,
u);if(16<d)for(d=Math.ceil(d/16),u=1;u<d;u+=1)e({chartX:n.chartX+u/d*(k.chartX-n.chartX),chartY:n.chartY+u/d*(k.chartY-n.chartY),chartCenterY:(n.chartCenterY||0)+u/d*((k.chartCenterY||0)-(n.chartCenterY||0)),plotX:(n.plotX||0)+u/d*(b-(n.plotX||0)),plotY:(n.plotY||0)+u/d*(g-(n.plotY||0))})}e(k);n=k}}return b}}function B(a){if(this.renderer){const e=this;let f=H(e.renderer.globalAnimation).duration;e.labelSeries=[];e.labelSeriesMaxSum=0;e.seriesLabelTimer&&t.clearTimeout(e.seriesLabelTimer);e.series.forEach(function(b){const k=
b.options.label||{},d=b.labelBySeries,h=d&&d.closest;k.enabled&&b.visible&&(b.graph||b.area)&&!b.boosted&&e.labelSeries&&(e.labelSeries.push(b),k.minFontSize&&k.maxFontSize&&b.yData&&(b.sum=b.yData.reduce((a,b)=>(a||0)+(b||0),0),e.labelSeriesMaxSum=Math.max(e.labelSeriesMaxSum||0,b.sum||0)),"load"===a.type&&(f=Math.max(f,H(b.options.animation).duration)),h&&("undefined"!==typeof h[0].plotX?d.animate({x:h[0].plotX+h[1],y:h[0].plotY+h[2]}):d.attr({opacity:0})))});e.seriesLabelTimer=S(function(){e.series&&
e.labelSeries&&z(e)},e.renderer.forExport||!f?0:f)}}function N(a,e,f,b,k){const d=k&&k.anchorX;k=k&&k.anchorY;let h,m,g=f/2;G(d)&&G(k)&&(h=[["M",d,k]],m=e-k,0>m&&(m=-b-m),m<f&&(g=d<a+f/2?m:f-m),k>e+b?h.push(["L",a+g,e+b]):k<e?h.push(["L",a+g,e]):d<a?h.push(["L",a,e+b/2]):d>a+f&&h.push(["L",a+f,e+b/2]));return h||[]}const {animObject:H}=a,{format:Q}=w,{setOptions:L}=f,{boxIntersectLine:J,intersectRect:P}=y,{addEvent:M,extend:K,fireEvent:R,isNumber:G,pick:D,syncTimeout:S}=t,I=[];"";return{compose:function(a,
e){t.pushUnique(I,a)&&(M(m,"load",B),M(m,"redraw",B));t.pushUnique(I,e)&&(e.prototype.symbols.connector=N);t.pushUnique(I,L)&&L({plotOptions:{series:{label:O}}})}}});w(a,"masters/modules/series-label.src.js",[a["Core/Globals.js"],a["Extensions/SeriesLabel/SeriesLabel.js"]],function(a,m){m.compose(a.Chart,a.SVGRenderer)})});
//# sourceMappingURL=series-label.js.map